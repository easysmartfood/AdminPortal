<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>Admin Portal</title>
    
    

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="dist/css/dashboard.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  <style id="holderjs-style" type="text/css"></style>
  
 <style>
  /* Badger
------------------------- */

[class*="badger"] {
    position: relative;
    margin: 15px 0 0 115px;
    padding: 39px 19px 14px;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 6px;
}

[class*="badger"]:after {
    content: attr(data-badger);
    position: absolute;
    top: 0;
    padding: 3px 7px;
    font-size: 12px;
    font-weight: bold;
    background: #999;
    color: #fff;
}

[class*="table table-striped"]{
	font-size: 12px;
}

.badger-left:after {
    left: 0;
    border-radius: 6px 0 6px 0;
}

.badger-right:after {
    right: 0;
    border-radius: 0 6px 0 6px;
}

.badger-danger:after {
    background: #d9534f;
}

.badger-warning:after {
    background: #f0ad4e;
}

.badger-success:after {
    background: #5cb85c;
}

.badger-info:after {
    background: #5bc0de;
}

.badger-inverse:after {
    background: #222;
}
</style> 
  
  </head>

  <body style="" onload="getUrlData()">
 

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">EasySmartFood</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Dashboard</a></li>
            <li><a href="#">Settings</a></li>
            <li><a href="#">Profile</a></li>
            <li><a href="#">Help</a></li>
          </ul>
          <form class="navbar-form navbar-right">
            <input type="text" class="form-control" placeholder="Search...">
          </form>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar">
            <li><a href="index.html">Overview</a></li>
            <li><a href="vieworders.html">View Orders</a></li>
            <li class="active"><a href="viewrestaurants.html">View Restaurants</a></li>
            <li><a href="addrestaurant.html">Add Restaurant</a></li>
            <li><a href="viewfooditems.html">View Food Items</a></li>
            <li><a href="addfooditem.html">Add Food Items</a></li>
          </ul>
          <ul class="nav nav-sidebar">
            <li><a href="">Nav item</a></li>
            <li><a href="">Nav item again</a></li>
            <li><a href="">One more nav</a></li>
            <li><a href="">Another nav item</a></li>
            <li><a href="">More navigation</a></li>
          </ul>
          <ul class="nav nav-sidebar">
            <li><a href="">Nav item again</a></li>
            <li><a href="">One more nav</a></li>
            <li><a href="">Another nav item</a></li>
          </ul>
        </div>
    
        <div class="container">
        
         
	<div class="row">
		<h2 class="sub-header1">Restaurant Detail</h2>
		<div class="row">
  	<!-- 	<div class="col-xs-12 col-md-8"></div>  -->
  	<!--     <div class="col-xs-6 col-md-4"></div> -->
  	<!-- 	<div class="col-xs-6 col-md-4"></div> -->
		</div>
		
        
        <div class="badger-left" data-badger="Summary">
         <div class="table-responsive">
            <button id="saveRestaurant" type="submit" class="btn btn-primary">Save Restaurant</button>
            <table id="restaurantTable" class="table table-striped">
              <thead>
                <tr>
                  <th>Restuarant #</th>
                  <th>Name</th>
                  <th>Visible</th>
                  <th>Featured</th>
                  <th>Region</th>
                  <th>Sub Region</th>
                  <th>Cuisine</th>
                  <th>Popular</th>
                </tr>
              </thead>
              <tbody>
          
              </tbody>
            </table>
          </div>
        
		</div>

<div class="badger-right badger-info" data-badger="Address">
         <div class="table-responsive">
            <table id="restaurantTable1" class="table table-striped">
              <thead>
                <tr>
                  <th>Address Line1</th>
                  <th>Address Line 2</th>
                  <th>City</th>
                  <th>Postal Code</th>   
                  <th>Email</th>       
                  <th>Phone</th>    
 

                </tr>
              </thead>
              <tbody>
          
              </tbody>
            </table>
          </div>
</div> 

<div class="badger-left badger-danger" data-badger="Timing">
  <div class="table-responsive">
            <table id="restaurantTable2" class="table table-striped">
              <thead>
                <tr>
                  <th>Open Time</th>
                  <th>Close Time</th>
                  <th>Holiday</th>
                  <th>Misc Closed</th>
                  <th>Food Time Category</th>
                  <th>Primary Image</th>

                </tr>
              </thead>
              <tbody>
          
              </tbody>
            </table>
          </div>
</div>

<div class="badger-right badger-warning" data-badger="Discount">
 <div class="table-responsive">
            <table id="restaurantTable3" class="table table-striped">
              <thead>
                <tr>
                  <th>Discount %</th>
                  <th>Discount Code</th>
                  <th>Discount Amt</th>
                  <th>Tax Class</th>
                </tr>
              </thead>
              <tbody>
          
              </tbody>
            </table>
          </div>
</div>

<div class="badger-left badger-success" data-badger="Images">
<div class="table-responsive">
            <table id="restaurantTable4" class="table table-striped">
              <thead>
                <tr>
                  <th>Image1</th>
                  <th>Image2</th>
                  <th>Image3</th>
                  <th>Image4</th>
                  <th>Image5</th>
                </tr>
              </thead>
              <tbody>
          
              </tbody>
            </table>
          </div>
</div>

<div class="badger-right badger-inverse" data-badger="Other">
<div class="table-responsive">
            <table id="restaurantTable5" class="table table-striped">
              <thead>
                <tr>
                  <th>Latitude</th>
                  <th>Longitude</th>
                  <th>Comments</th>
                  <th>Reviews</th>
                </tr>
              </thead>
              <tbody>
          
              </tbody>
            </table>
          </div>
</div>
        
        
	</div>
</div>
        
        
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
<!--          <h1 class="page-header">Dashboard</h1> -->  


       
        </div>
      </div>
    </div>
    
    <!-- Hidden Fields -->
    <input type="hidden" name="orderJson" value="">

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="dist/js/bootstrap.min.js"></script>
    <script src="dist/js/docs.min.js"></script>
    <script src="dist/js/bootstrap-paginator.min.js"></script>
    <script type="text/javascript" src="dist/js/jquery.tablesorter.js"></script> 
    <script type="text/javascript" src="dist/js/jquery.tablesorter.pager.js"></script> 
    <script type="text/javascript" src="dist/js/jquery.dataTables.js"></script> 
     <script src="dist/js/jquery-ui.js"></script>
    <script>
    jQuery.browser = {};
    (function () {
        jQuery.browser.msie = false;
        jQuery.browser.version = 0;
        if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
            jQuery.browser.msie = true;
            jQuery.browser.version = RegExp.$1;
        }
    })();
    </script>
    <script>
    var orderJsonObj;
    var corderStatus;
    function getParameter(paramName) {
        var searchString = window.location.search.substring(1), i, val, params = searchString.split("&");

        for ( i = 0; i < params.length; i++) {
            val = params[i].split("=");
            if (val[0] == paramName) {
                return val[1];
            }
        }
        return null;
    }

    function getUrlData() {
        var restaurantuuid = getParameter("restaurantuuid");

    
        $.ajax({  
            type: "GET",  
      //      url: "http://1.easysmartfood.appspot.com/order?orderuuid=9bea5b4f-a6ea-493f-8098-722d35feedf8",
       //     url:"https://api.mongolab.com/api/1/databases/order/collections/order?apiKey=kdBn8eE1V6vyPoavaLt8qbgpiPSY2IjL&q={%22orderUuid%22:%229bea5b4f-a6ea-493f-8098-722d35feedf8%22}", 		
              url: "https://api.mongolab.com/api/1/databases/restaurant/collections/restaurant?apiKey=S2fx57xyaqcVRY381V3RjkXo62hw9qbp&q={\"uuid\": \"" + restaurantuuid + "\"}",             
    	//	   url: "http://1.easysmartfood.appspot.com/order?orderuuid=" + orderuuid,  
            dataType: "json",  
        //    async: false,
            success: function(data){  
              // we have the response  
           //   alert(data.orderStatus);
         //     var foo = $("#dialog").dialog({title:orderuuid});
          //    foo.dialog("option","title",data);
              restaurantJsonObj=data[0];
           //   $('#orderJson').val(JSON.stringify(data));    
           //   var rid = $("#orderJson").val();
            //  alert(rid);
          
              var tr;
              tr = $('<tr/>');
                tr.append("<td>" + restaurantuuid + "</td>");
                tr.append("<td><input type='text' id='restaurantName' value='" + data[0].name+ "'/></td>");
                tr.append("<td> <select id='Visible' name=\"IsVisible\">"  + "<option value=\"" + data[0].visible + "\" selected>" + data[0].visible  +
                		  "</option><option value=\"Yes\">Yes</option> <option value=\"No\">No</option> </select> "
  				 + "</td>");
                
                tr.append("<td> <select id='Featured' name=\"IsFeatured\">"  + "<option value=\"" + data[0].featured + "\" selected>" + data[0].featured  +
                		  "</option><option value=\"Yes\">Yes</option> <option value=\"No\">No</option> </select> "
  				 + "</td>");
                
                tr.append("<td> <select id='region' name=\"region\">"  + "<option value=\"" + data[0].region + "\" selected>" + data[0].region  +
                  		"</option><option value=\"Kaloor\">Kaloor</option><option value=\"Palarivattom\">Palarivattom</option><option value=\"Edapally\">Edapally</option><option value=\"Kakkanad\">Kakkanad</option>" +	
      					"<option value=\"Infopark\">Infopark</option><option value=\"Panampilly Nagar\">Panampilly Nagar</option><option value=\"Kalamassery\">Kalamassery</option><option value=\"Thrikakkara\">Thrikakkara</option><option value=\"Vazhakkala\">Vazhakkala</option></select> "
    				 + "</td>");
                
                tr.append("<td><input type='text' id='subRegion' value='" + data[0].subRegion+ "'/></td>");

                tr.append("<td> <select id='cuisine' name=\"cuisine\">"  + "<option value=\"" + data[0].cuisine + "\" selected>" + data[0].cuisine  +
                  		"</option><option value=\"Indian\">Indian</option><option value=\"Chinese\">Chinese</option><option value=\"Arabian\">Arabian</option><option value=\"Malabar\">Malabar</option>" +	
      					"<option value=\"North Indian\">North Indian</option><option value=\"Western\">Western</option></select> "
    				 + "</td>");
                
                tr.append("<td> <select id='Popular' name=\"Popular\">"  + "<option value=\"" + data[0].popular + "\" selected>" + data[0].popular  +
                		  "</option><option value=\"Yes\">Yes</option> <option value=\"No\">No</option> </select> "
  				 + "</td>");

              $("#restaurantTable").append(tr);
              
              var tr1;
              tr1 = $('<tr/>');

          
              tr1.append("<td><input type='text' id='address1' value='" + data[0].address1 + "'/></td>");
              tr1.append("<td><input type='text' id='address2' value='" + data[0].address1 + "'/></td>");
              tr1.append("<td><input type='text' id='city' value='" + data[0].city + "'/></td>");
              tr1.append("<td><input type='text' id='zip' value='" + data[0].zip + "'/></td>");
              tr1.append("<td><input type='text' id='email' value='" + data[0].email + "'/></td>");
              tr1.append("<td><input type='text' id='phone' value='" + data[0].phone + "'/></td>");
      
            

              $("#restaurantTable1").append(tr1);
              
              
              var tr2;
              tr2 = $('<tr/>');
              tr2.append("<td><input type='text' id='openTime' value='" + data[0].openTime + "'/></td>");
              tr2.append("<td><input type='text' id='closeTime' value='" + data[0].closeTime + "'/></td>");
              
              tr2.append("<td> <select id='holiday' name=\"holiday\">"  + "<option value=\"" + data[0].holiday + "\" selected>" + data[0].holiday  +
            		  "</option><option value=\"Sunday\">Sunday</option> <option value=\"None\">None</option> </select> "
				 + "</td>");
              tr2.append("<td> <select id='miscClosed' name=\"miscClosed\">"  + "<option value=\"" + data[0].miscClosed + "\" selected>" + data[0].miscClosed  +
            		  "</option><option value=\"Yes\">Yes</option> <option value=\"No\">No</option> </select> "
				 + "</td>");
              tr2.append("<td> <select id='FoodTimeCategory' name=\"FoodTimeCategory\">"  + "<option value=\"" + data[0].foodTimeCategory + "\" selected>" + data[0].foodTimeCategory  +
              		"</option><option value=\"All Day\">All Day</option><option value=\"Lunch\">Lunch</option><option value=\"Dinner\">Dinner</option><option value=\"Snacks\">Snacks</option>" +	
  					"</select> "
				 + "</td>");
              tr2.append("<td><input type='text' id='thumbnailImage' value='" + data[0].thumbnailImage + "'/></td>");
 
              
              $("#restaurantTable2").append(tr2);

              
              var tr3;
              
              tr3 = $('<tr/>');
              tr3.append("<td><input type='text' id='discountPercent' value='" + data[0].discountPercent + "'/></td>");
              tr3.append("<td><input type='text' id='discountCode' value='" + data[0].discountCode + "'/></td>");
              tr3.append("<td><input type='text' id='discountAmt' value='" + data[0].discountAmt + "'/></td>");

              tr3.append("<td> <select id='taxClass' name=\"taxClass\">"  + "<option value=\"" + data[0].taxClass + "\" selected>" + data[0].taxClass  +
              		"</option><option value=\"default\">default</option>" +	
  					"</select> ");
          
              

              $("#restaurantTable3").append(tr3);
              
              var tr4;
              tr4 = $('<tr/>');

     

              $("#restaurantTable4").append(tr4);
              
              var tr5;
              tr5 = $('<tr/>');
              tr5.append("<td><input type='text' id='latitude' value='" + data[0].latitude + "'/></td>");
              tr5.append("<td><input type='text' id='longitude' value='" + data[0].longitude + "'/></td>");

     

              $("#restaurantTable5").append(tr5);
              

              
            },  
            error: function(e){  
              alert('Error121212: ' + e);  
            }  
            
            
            
          
            
            
      //    });
        
    }).done(function(){
    	
    //	alert("After content changed");
    	
    //	jQuery('#orderStatus').on('input', function() {
        //  	alert($('#orderStatus').val());
          // do your stuff
    //  	}); 

    	
    	
    });
//});
        
    }

      	
    $(function() {
    	
    	var gfoodUuid;
    	var gfoodDisplayName;
    	var gfoodPrice;
    	var gRestaurant;
    	var gQuantity;
    	
    	$("#saveRestaurant").click(function(){
    		
    		    restaurantJsonObj.name=$('#restaurantName').val();
        		restaurantJsonObj.visible=$('#Visible  option:selected').val();
        		restaurantJsonObj.featured=$('#Featured option:selected').val();
        		restaurantJsonObj.region=$('#region').val();
        		restaurantJsonObj.subRegion=$('#subRegion').val();
        		restaurantJsonObj.cuisine=$('#cuisine').val();
        		restaurantJsonObj.popular=$('#Popular').val();
        		
        		
        		restaurantJsonObj.address1=$('#address1').val();
        		restaurantJsonObj.address2=$('#address2').val();
        		restaurantJsonObj.city=$('#city').val();
        		restaurantJsonObj.zip=$('#zip').val();
        		restaurantJsonObj.email=$('#email').val();
        		restaurantJsonObj.phone=$('#phone').val();
        		
        		restaurantJsonObj.openTime=$('#openTime').val();
        		restaurantJsonObj.closeTime=$('#closeTime').val();
        		restaurantJsonObj.holiday=$('#holiday').val();
        		restaurantJsonObj.miscClosed=$('#miscClosed').val();
        		restaurantJsonObj.foodTimeCategory=$('#FoodTimeCategory').val();
        		restaurantJsonObj.thumbnailImage=$('#thumbnailImage').val();
        		
        		restaurantJsonObj.discountPercent=$('#discountPercent').val();
        		restaurantJsonObj.discountCode=$('#discountCode').val();
        		restaurantJsonObj.discountAmt=$('#discountAmt').val();
        		restaurantJsonObj.taxClass=$('#taxClass').val();
        		
        		
        		restaurantJsonObj.latitude=$('#latitude').val();
        		restaurantJsonObj.longitude=$('#longitude').val();
        		
        		var putData = JSON.stringify(restaurantJsonObj);
        	//	alert(putData);
        		
        	
        		$.ajax({
        			  url: 'https://api.mongolab.com/api/1/databases/restaurant/collections/restaurant?apiKey=S2fx57xyaqcVRY381V3RjkXo62hw9qbp' + "&q={\"uuid\":\"" + getParameter("restaurantuuid") + "\"}",
        			  type: 'PUT',
        			  dataType: "json",
        			  crossDomain: true,
        			  contentType: "application/json; charset=utf-8",
        			  data: putData,
        			  success: function(data) {
        			    alert('Restaurant Update Saved');
        			    location.reload();
        			  }
        			});
   
        		
        	});
    	
    	});
    	
    
    	
    	
    	
    	
    	
   // });
      	
    </script>

</body></html>
